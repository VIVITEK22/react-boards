import{S as p,T as h,N as j,U as f,j as s,V as g,W as t,X as l,Y as c,Z as m,I as d,_ as u,B as w,$ as b,a0 as F,a1 as x,L as P,J as S}from"./index-yBAOsCqi.js";import{A as y}from"./auth-layout-AwLU9jTq.js";function R(){var n,r;const{login:e}=p(),o=h.useMutation("post","/auth/register",{onSuccess(i){e(i.accessToken)}}),a=i=>{o.mutate({body:i})};return(n=o.error)!=null&&n.message&&j.getToasts().length<1&&j.error((r=o.error)==null?void 0:r.message),{handleSubmit:a,isPending:o.isPending}}const T=F({email:x({required_error:"Email обязателен"}).email("Неверный email"),password:x({required_error:"Пароль обязателен"}).min(6,"Пароль должен содержать не менее 6 символов"),confirmPassword:x().optional()}).refine(e=>e.password===e.confirmPassword,{message:"Пароли не совпадают",path:["confirmPassword"]});function L(){const e=f({resolver:b(T),defaultValues:{email:"",password:"",confirmPassword:""}}),{handleSubmit:o,isPending:a}=R(),n=e.handleSubmit(r=>o(r));return s.jsx(g,{...e,children:s.jsxs("form",{onSubmit:n,className:"flex flex-col gap-5",children:[s.jsx(t,{control:e.control,name:"email",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:"Email"}),s.jsx(m,{children:s.jsx(d,{placeholder:"admin@gmail.com",...r})}),s.jsx(u,{})]})}),s.jsx(t,{control:e.control,name:"password",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:"Пароль"}),s.jsx(m,{children:s.jsx(d,{type:"password",...r})}),s.jsx(u,{})]})}),s.jsx(t,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(l,{children:[s.jsx(c,{children:"Подтвердите пароль"}),s.jsx(m,{children:s.jsx(d,{type:"password",...r})}),s.jsx(u,{})]})}),s.jsx(w,{type:"submit",className:"cursor-pointer",disabled:a,children:"Зарегистрироваться"})]})})}function N(){return s.jsx(y,{cardTitle:"Регистрация",cardDescription:"Введите ваш email и пароль для регистрации в системе",form:s.jsx(L,{}),footer:s.jsxs(s.Fragment,{children:["Уже есть аккаунт? ",s.jsx(P,{to:S.LOGIN,children:"Вход"})]})})}export{N as default};
